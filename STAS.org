#+title: Stas

* Requerimentos
** DONE requerimiento ley urgencia hospitalizado [3/3]
DEADLINE: <2023-03-20 lun> SCHEDULED: <2023-03-16 jue>
*** DONE tabla HCU_LEY_URGENCIA [6/6]
  - [X] PAC_NUMFICHA_URG numeric 10
  - [X] PAC_NUMFICHA_HOSP numeric 10 null
  - [X] ING_CORREL_URG numeric 4
  - [X] ING_CORREL_HOSP numeric 4 null
  - [X] PTD_RUT char 10 null
  - [X] HLU_FEC_LEY_URG datetime null

*** DONE Eliminar cambios anteriores ley urgencia [3/3]
- [X] tabla ATENCION
- [X] spu_adm_obtener_atencion (pb)
- [X] spu_adm_guardar_atencion (pb)

*** DONE Componente ley urgencia hospitalizado [3/3]
- [X] guardar ingreso en hospitalizado debe verificar si paciente es ley urg
- [X] si paciente es ley urg se debe guardar pacnumficha e ingcorrel de hosp en HCU_LEY_URGENCIA
- [X] componente ley urgencia [2/2]
  + [X] Buscar en HCU_LEY_URGENCIA si paciente registra
  + [X] si registra muestra alert con fecha de registro

**** Lista de modificaciones
- API
  + AdimisionHospitalaria
  + Urgencia
- WEB
  + Urgencia
  + Clinica
- DB
  + HCU_LEY_URGENCIA C
  + spu_adm_registro_ley_urg C
  + spu_adm_obtener_pac_ley_urg C .
  + spu_adm_guardar_atencion M
  + spu_adm_obtener_atencion M

** DONE requerimiento suspender indicación hospitalizado [5/5]
DEADLINE: <2023-03-22 miÃ©> SCHEDULED: <2023-03-21 mar>
- [X] campo requiere kine debe ser required y tener opciones "si/no"
- [X] eliminar fecha hasta de vista/sp/tabla
- [X] al firmar debe verificar si campo kine true para agregar a lista kine
- [X] editar tabla HCH_PROCEDIMIENTO_MEDICO [2/2]
  + [X] HPM_ESTADO_PROCEDIMIENTO char 1 null (s = suspendido)
  + [X] HPM_FEC_ESTADO datetime null
- [X] agregar suspender indicación [3/3]
  + [X] agregar marca en objeto/db/sp/api para identificar suspendido
  + [X] si es suspendido debe mostrar alert 'Indicación suspendida el {fecha}'
  + [X] si se suspende con kine = true eliminar de lista kine
**** Lista de modificaciones
- API
  + FichaClinicaHospitalizado
- WEB
  + Clinica
- DB
  + HCH_PROCEDIMIENTO_MEDICO M
  + spu_fch_kine_obtener_pacientes_kinesioterapia M
  + spu_fch_guardar_procedimiento_medico M
  + spu_fch_obtener_procedimiento_medico M
  + spu_fch_anular_indicacion_procedimiento C

** TODO requerimiento rehabilitacion [1/1]
DEADLINE: <2023-03-23 jue> SCHEDULED: <2023-03-23 jue>
- [X] En vista kinesiologo, menu registro rehab [4/4]
  + [X] ocultar motivo de consulta
  + [X] agregar valor "otro" a escalas
    + Modificar tabla FRE_ESCALAS insert campo "otros"
  + [X] agregar campo invisible y required si hay escala elegida de texto libre "resultado escalas evaluadas"
    + Modificar tabla FCH_REHABILITACION nueva columna FRE_RES_ESCALA_EVAL varchar 1000 null desc 'Resultado de la escala evaluada'
  + [X] al marcar alugna escala debe aparecer campo "resultado escalas evaluadas"
- [X] Agregar campos en vue/sp/api/db para resultado escalas evaluadas
**** DONE Lista de modificaciones
- API
  + FichaClinicaHospitalizado
- WEB
  + Clinica
- DB
  + FRE_ESCALAS M
    - INSERT INTO FRE_ESCALAS (FES_CORREL, FES_ESCALA, FES_VIGENTE) VALUES (5, 'OTROS', 'S')
  + FCH_REHABILITACION M
    - ALTER TABLE FCH_REHABILITACION ADD FRE_RES_ESCALA_EVAL varchar(1000)
  + spu_fch_kine_guardar_atencion M
  + spu_fch_kine_obtener_atencion M

** DONE requerimiento ficha rehabilitacion ambulatoria[11/11]
SCHEDULED: <2023-03-24 vie>
- [X] Agregar marca si es primera sesión
- [X] Ocultar motivo consulta
- [X] agregar valor "otro" a escalas
- [X] agregar campo invisible y required si hay escala seleccionada "resultado escalas evaluadas"
- [X] al marcar escala mostrar campo "resultado escalas evaluadas"
- [X] Agregar campos en vue/sp/api/db para resultado escalas evaluadas
  - spu_fca_kine_guardar_sesion_rehabilitacion
  - spu_fca_kine_listar_sesion_rehabilitacion
  - spu_fca_kine_actualizar_sesion_rehabilitacion
- boton finalizar tratamiento cierra todas las sesiones
- [X] Finalizar tratamiento finaliza sesion actual
- [X] en lista de pacientes "atender" revisa si es kine > atencion kine, de lo contrario atencion medico
- [X] primera sesion marca desde vue, valor dinamico en API
- [X] dejar boton de si/no para primera sesion en vue
- [X] lista de escalas separar con "," como en hospitalizado
**** Lista de modificaciones
- API
  + FichaClinicaAmbulatoria
- WEB
  + Ambulatorio
- DB
  + spu_fca_kine_guardar_sesion_rehabilitacion M
  + spu_fca_kine_listar_sesion_rehabilitacion M
  + spu_fca_kine_actualizar_sesion_rehabilitacion M
  + FSE_SESION_REHAB M
    - ALTER TABLE FRE_SESION_REHAB ADD FSR_RES_ESCALA_EVAL varchar(1000)

**** DUDAS
- Al guardar escalas no se guardan todas en lista, ayuda para revisar comportamiento


** DONE requerimento historial paciente
- historial paciente componente
- historial componente detalle

*** Lista detalles encontrados en fase QA [8/8]
- [X] En ver detalle cuadro resumen sesiones terapeuticas fecha al final  "invalid date"
- [X] campos no se bloquean al firmar atencion
- [X] al cambiar ingreso sigue apareciendo como firmado
  - Tenia que limpiar datos al cambiar ingreso en funcion cargarKinesiologia al usar "rowDblClickedIngreso"
- [X] Prestador no puede guardar ni Firmar si no es quien atiende
- [X] Required solo si es primera sesion
- [X] Firmar sesion guarda nueva sesion
  - Firmaba sesion con datos vacios ya que correl de sesion estaba vacio, faltaba mantener editando sesion actual para no perder correl
- [X] Al cargar sesion debe tomar datos automaticamente para poder seguir editando
- [X] al seleccionar una escala, guardarla y luego quitarla y guardar, no se puede volver a guardar
  - limpiar bien los datos antes de funcion editar


** DONE Requerimiento ENO tres proyectos [7/7]
- [X] Enfermedad > Diagnóstico ENO
- [X] Diagnostico alta eliminar de vista, api y sp
- [X] Identificar servicio de proveniencia del diagnostico ENO
- [X] en tabla ENO agregar boton para llevar a atención del paciente
- [X] en cada proyecto modificar buscar paciente para revisar marca desde store, si la encuentra utilizar datos de store para buscar paciente [3/3]
  - [X] Ambulatorio
  - [X] Urgencia
  - [X] Hospitalizado
- [X] En tabla ENO agregar columna servicio paciente
- [X] Agregar dato Servicio paciente en SP y API

** DONE Nueva Vista Otros profesionales Urgencia [9/9]
- [X] Crear Menu Otros Profesionales
- [X] Layout como en evolución Médica de hospitalizado
- [X] Crear Tabla URGENCIA_OTROS_PROFESIONALES [7/7]
  - [X] PAC_NUMFICHA numeric 10 not null
  - [X] ING_CORREL numeric 4 not null
  - [X] PTD_RUT char 10  null
  - [X] UOP_CORREL numeric 18 not null
  - [X] UOP_EVOLUCION varchar 1000 null
  - [X] UOP_FECHA_REG datetime null
  - [X] USU_LOGIN_CREA varchar 50 null
- [X] sp para guardar atencion otros profesionales
- [X] api para guardar atencion otros profesionales
  - tomar de ejemplo hospitalizado como guarda evolucion medica
    - NO OLVIDAR REGISTRAR REPOSITORY EN STARTUP
- [X] Error 500 al pedir evoluciones, pedir revisar api
- [X] Routes no deja entrar a vista otros profesionales, seguramente por falta permisos en DB
- [X] PENDIENTE Agregar funcion para firmar cada evolucion
  - Se crea funcion para firmar todas las evoluciones a nombre del prestador
- [X] Fix vista historial paciente
  - tomar vista alergias de hospitalizado y cambiar col-3 -> col-2 y col-7 -> col-8 en vista ppal

** DONE OTROS [2/2]
- [X] En urgencia revisar si es enfermera o es tens al hacer doble click en mapa cama
- [X] si es auditor enviar a atencion medico
** DONE Historial paciente en Urgencia [3/3]
- [X] Pasar componente
- [X] verificar que componente sea con filtro kine
- [X] arreglar visual componente

** HOLD Notificacion GES [0/1]
- [ ] Revisar problema de insert y retomar flujo

** TODO Bugs encontrados [2/2]
- [X] Historial Esi error dato
  - Tenia error al intentar enviar lista vacia, se agrega verificacion de length
- [X] Categorizacion
  - error de sp verificaba si HE_CORREL IS NULL en lugar incorrecto, se quita

** TODO Firmar enfermera [0/5]
- [ ] Firmar evoluciones a nombre enfermera, como en otros profesionales
- [ ] En vue enviar todas las evoluciones que correspondan al usuLogin
- [ ] en API agregar campo bool para comprobar si evolucion esta firmada
- [ ] en SP verificar si atencion está firmada y si es asi insertar fecha en campo fecha fin evolucion
- [ ] en DB agregar columna fecha fin evolucion en tabla que corresponda

** TODO Vista Otros profesionales para ambulatorio
